---
title: "[C++] [[nodiscard]] 키워드는 언제 써야하는걸까?" 

categories:
  - Cpp
tags:
  - [Debug]
  - [cpp]
  - [keyword]


toc: true
toc_sticky: true
#목차 생성 여부

published: true
#글 공개 여부

date:       2024-03-22T00:00:00+09:00
lastmod:    2024-03-22T16:55:00+09:00
---

이 글은 C++을 공부하면서 알게된 지식과 습관을 정리해둔 글입니다
{: .notice--warning}

# 참고사항
- 반박시 건전한 토론이 이루어질 가능성이 높습니다. 댓글, DM, 이메일로 말씀해주시면 가능한 모두 답변해드립니다. 

## \[[nodiscard]] 키워드 란?
- [[nodiscard]] 키워드는 함수의 반환값이 무시되는 것을 방지하기 위해 사용됩니다. 이 키워드를 함수에 적용하면, 해당 함수의 반환값을 사용하지 않고 무시하면 컴파일러에서 경고, 오류를 발생시킵니다.

## 유용한 상황
1. 오류 상태 반환: 함수가 오류상태를 반환할 떄 이를 무시하면 문제가 발생할 가능성이 있습니다. 예를 들어 메모리 할당, 파일 읽기 쓰기와 같은 루틴에서 실패상태를 반환할 때 반환값이 무시되지 않도록 \[[nodiscard]]로 반환값 사용을 강제합니다.
2. 중요한 계산 결과: 어떤 루틴이 중요한 계산을 수행하고 그 결과를 반환할 때, 그 결과를 무시할 경우 프로그래머의 실수일 가능성이 높습니다. 이를 방지하고자 정적 타임에 검사할 수 있는 \[[nodiscard]]키워드를 사용하는 것은 유용합니다.
3. 사이드이펙트가 없는 함수: 사이드 이펙트가 없으면서 반환값이 유일한 목적인 함수를 사용할 때, 반환값을 사용하지 않는다면 해당 함수의 사용은 아무의미가 없습니다. 필요가 없다면 함수 호출을 없애야하고, 필요가 있다면 반환값을 사용해야하므로 프로그래밍 실수를 방지할 수 있습니다. 

## 상수 멤버함수 fn() const 와 관련된 개념?
- C++에서 멤버 함수 시그니처 뒤에 const를 붙이는 것은 해당 멤버 함수가 객체의 상태를 변경하지 않는다는 것을 나타냅니다.
- 이는 멤버 함수가 객체 멤버 데이터를 수정하지 않는다는 것을 보증합니다.
- 자신의 데이터를 수정하는 사이드 이펙트가 없기 때문에 상수 멤버함수는 반환 값을 주요한 기능으로 취급하는 경우가 많습니다.
- 주요 목적이 반환값인 함수에서 \[[nodiscard]] 키워드를 사용하면 프로그래머가 반환값을 무시하는 실수를 방지할 수 있습니다.
- 상수 멤버함수가 많은 경우에 주요 목적이 반환값이기 때문에 const 멤버 함수를 작성할 경우 \[[nodiscard]]키워드를 함께 고려하면 적절할 것 같습니다. 

## 결론
- 반환값만이 존재 목적인 함수들이 종종있습니다. \[[nodiscard]] 키워드를 사용하면 반환값을 무시해버리는 프로그래밍 실수를 방지할 수 있습니다.

## 예시
```cpp
[[nodiscard]] int somethingImportant();

int main()
{
    somethingImportant();
    // 이 경우 컴파일러는 경고 또는 오류를 발생시킬 것입니다.
    return 0;
}

int main()
{
    int num = somethingImportant();
    // 적절한 코드.
    return 0;
}
```

***

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}